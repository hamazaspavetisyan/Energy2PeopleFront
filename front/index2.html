<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title>Renewable Energy Explorer</title>
  <link rel="stylesheet" href="css/estilogeneral.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" /> <!--Remote -> Local -->
  <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
  <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.js"></script>
   <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> <!--Remote -> Local -->

    <script src="http://www.google.com/jsapi?key=ABQIAAAAuPsJpk3MBtDpJ4G8cqBnjRRaGTYH6UMl8mADNa0YKuWNNa8VNxQCzVBXTx2DYyXGsTOxpWhvIG7Djw" type="text/javascript"></script>
    <script type="text/javascript">
$(document).ready(function(){
    init();
    $("#measureSelect").change(function() {
      console.log($("#measureSelect").val());
});
$( "#choice" ).buttonset();
$("#getInfoButton").click(function() {
      
      getInformation('http://localhost:8080/kmlbi/biservlet?q=' + $("#measureSelect").val() + '&fYear=' + $("#fromYear option:selected").text() + '&tYear=' + $("#toYear option:selected").text() + '&fMonth=' + $("#fromMonth option:selected").val() + '&tMonth=' + $("#toMonth option:selected").val() +'&fDay=' + $("#datepickerFrom").val() + '&tDay=' + $("#datepickerTo").val() + '&aggr=' + $("#choice :radio:checked").val());

      console.log($("#measureSelect").val());
      console.log($("#fromYear option:selected").val());
      console.log($("#toYear option:selected").val());
      console.log($("#datepickerFrom").val());
      console.log($("#datepickerTo").val());
      console.log($("#choice :radio:checked").val());
});

var i;
for(i = 0; i < 30; i++)
{  var option = "<option value='"+ i +"'>"+ (1983+i) +"</option>"
  $(option).appendTo("#fromYear");
  $(option).appendTo("#toYear");
}

$( "#datepickerFrom" ).datepicker();
$( "#datepickerTo" ).datepicker();

$(function() {
    $( "#accordion" ).accordion();
  });

$("<option value='1'> January </option>").appendTo("#fromMonth");
$("<option value='2'> February </option>").appendTo("#fromMonth");
$("<option value='3'> March </option>").appendTo("#fromMonth");
$("<option value='4'> April </option>").appendTo("#fromMonth");
$("<option value='5'> May </option>").appendTo("#fromMonth");
$("<option value='6'> June </option>").appendTo("#fromMonth");
$("<option value='7'> July </option>").appendTo("#fromMonth");
$("<option value='8'> August </option>").appendTo("#fromMonth");
$("<option value='9'> September </option>").appendTo("#fromMonth");
$("<option value='10'> October </option>").appendTo("#fromMonth");
$("<option value='11'> November </option>").appendTo("#fromMonth");
$("<option value='12'> December </option>").appendTo("#fromMonth");

$("<option value='1'> January </option>").appendTo("#toMonth");
$("<option value='2'> February </option>").appendTo("#toMonth");
$("<option value='3'> March </option>").appendTo("#toMonth");
$("<option value='4'> April </option>").appendTo("#toMonth");
$("<option value='5'> May </option>").appendTo("#toMonth");
$("<option value='6'> June </option>").appendTo("#toMonth");
$("<option value='7'> July </option>").appendTo("#toMonth");
$("<option value='8'> August </option>").appendTo("#toMonth");
$("<option value='9'> September </option>").appendTo("#toMonth");
$("<option value='10'> October </option>").appendTo("#toMonth");
$("<option value='11'> November </option>").appendTo("#toMonth");
$("<option value='12'> December </option>").appendTo("#toMonth");

});
</script>

<script type="text/javascript">
    var ge;
    var currentKmlObject = null;

     function finished(kmlObject) {
        if (!kmlObject) {
          setTimeout(function() {
            alert('Bad or null KML.');
          }, 0);
          return;
        }else{
          console.log("LLEGO BIEN");
          currentKmlObject = kmlObject;
          ge.getFeatures().appendChild(kmlObject);
        }
      }
    
    google.load("earth", "1");
    
    function init() {
      google.earth.createInstance('map3d', initCallback, failureCallback);
    }


    function getInformation(url){
      if (currentKmlObject) {
    ge.getFeatures().removeChild(currentKmlObject);
    currentKmlObject = null;
  }
      google.earth.fetchKml(ge, url, finished);
    }
    
    function initCallback(instance) {
      ge = instance;
      ge.getWindow().setVisibility(true);
    
      // add a navigation control
      ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);
    
      // add some layers
      ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
      ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);
    
    }
    
    function failureCallback(errorCode) {
    }
    
    </script>
  </head>
  <body  style="font-family: arial, sans-serif; font-size: 13px; border: 0;">
<div class="container" id = "general">
<div id="encabezado" class="row">

<div class= "span4" id="logo"><h3></h3></div>

<div id="menu" class="span8">
<ul class="nav nav-pills">
<li class="active" style="width:150px"><a href="#">Home</a></li>
<li class="dropdown" id="menu1">
<li><a href="#">How does it work?</a></li>
<li><a href="#">Business Intelligence</a></li>
<li><a href="#">FAQ</a></li>
<li><a href="#">Developer</a></li>

</div>
</div>
<div id="cuerpo" class="row">

<div id="izquierda" class="span4">
  
  <h3> Meteo-BI Form </h3>
  <div id="accordion">
    <h3> Yearly </h3>
    <div class = "row">
      <div id = "yearSelection" class = "span4">
        <div class = "row">
            <select id = "fromYear">
              <option value="0">-----</option>
            </select>
            <select id = "toYear">
              <option value="0">-----</option>
            </select>
      </div>
    </div>
  </div>
    <h3>Monthly</h3>
    <div class="row"> 
      <div id = "monthSelection" class="span4">
        <div class = "row">
          <select id = "fromMonth">
            <option value="0">-----</option>
          </select>
        </div>
        <div class = "row">
          <select id = "toMonth"> 
            <option value="0">-----</option>
          </select>
        </div>
      </div>
  </div>
  <h3>Dayly</h3>
<div class = "row">
  <div id = "daySelection" class = "span4">
   <input type="text" id="datepickerFrom"/></p>
    <input type="text" id="datepickerTo"/></p>
  </div>
</div>
<h3>Measure</h3>
<div class = "row">
  <div id = "measureSelection" class = "span4">
    <select id="measureSelect">
      <option value="1">Horizontal Solar Radiation</option>
      <option value="2">Dew Frost</option>
      <option value="3">Relative Humidity</option>
      <option value="4">Wind Speed</option>
      <option value="5">Precipiation</option>
    </select>
  </div>
</div>
<h3> Aggregator </h3>
<div id = "slicer" class = "span4">
  <span id="choice">
    <div id = "row">
      <input type="radio" id="totalRadio" name="repeat" checked="checked" value= "1" /><label for="totalRadio">Tot</label>
      <input type="radio" id="avgRadio" name="repeat" value= "2"/><label for="avgRadio">Avg</label>
      <input type="radio" id="maxRadio" name="repeat" value= "3"/><label for="maxRadio">Max</label>
      <input type="radio" id="minRadio" name="repeat" value= "4"/><label for="minRadio">Min</label>
    </div>
  </span>
</div>
</div>
  <br><br><br><br>
  <br><br><br><br>
<div>
<p><a id = "getInfoButton" class="btn btn-primary btn-large">GET INFORMATION!!</a></p>
</div>
</div>
    <div id="derecha" class="span8">
    <h1>Renewable Energy Explorer</h1>
    <br>
    <div id = "map3d" style="width: 700px; height: 550px;">

    </div>

    </div>
  </body>
</html>
